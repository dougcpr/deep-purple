#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
Copyright (C) Freedom Robotics, 2018 - All Rights Reserved

This file is part of the the Freedom Python SDK

Unauthorized copying of this file, via any medium is strictly prohibited
Proprietary and confidential

"""
import sys

from freedomrobotics.agent_base import service_start, service_stop, is_agent_running


def print_help():
    print("python agent.py start|stop|restart|status")

################################################################################
# MAIN
################################################################################


if __name__ == "__main__":

    if len(sys.argv) > 1:
        action = sys.argv[1]
    else:
        action = "start"

    if action == "start":
        service_start()      
    elif action == "stop":
        if not service_stop():
            sys.exit(-1)
    elif action == "status":
        if not is_agent_running():
            print("Agent is not running")
            sys.exit(-1)
        else:
            print("Agent is running")
            sys.exit(0)
    elif action in ["restart", "reload"]:
        if not service_stop():
            print("Could not stop fr_agent to restart")
            sys.exit(-1)
        service_start()      
    else:
        print("Unknown command: " + str(action))
        print_help()
        sys.exit(-1)
